<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="lib/grapheme.js"></script>
        <script type="text/javascript" src="lib/d3.min.js"></script>
        <script type="text/javascript" src="src/math.js"></script>
        <script type="text/javascript" src="src/graphs.js"></script>
    </head>

    <style>
        text {
            text-anchor: end;
        }
    </style>

    <body>
        <p>Hello, D3 world!</p>
        <input type="file" id="files"  names="files[]" multiple />
        <output id="list" ></output>
        <table id="input_table" class="hide">
            <tr>
                <td>Name 1:</td>
                <td>
                    <input name="b_name_input" id="b_name_input" type="text" value="Bob" />
                </td>
                <td>Ids:</td>
                <td>
                    <input name="b_ids_input" id="b_ids_input" type="text" value="23" />
                </td>
            </tr>
            <tr>
                <td>Name 2:</td>
                <td>
                    <input name="k_name_input" id="k_name_input" type="text" value="Kate" />
                </td>
                <td>Ids:</td>
                <td>
                    <input name="k_ids_input" id="k_ids_input" type="text" value="20" />
                </td>
            </tr>
        </table>
        <button type="button" onclick="trigger_process(file_to_read)">Show Data!</button>

        <div id="graph0_wrapper">
            <p id="num_msgs">Total Number of Messages</p>
            <svg width="760"  height="140" >
                <g id="graph0_bars" transform="translate(70, 30)" >
                </g>
                <g id="graph0_labels" transform="translate(70, 30)" >
                </g>
                <g id="graph0_annotations"  transform="translate(70, 30)" >
                </g>
            </svg>
            <div id="graph0_avgs">
            </div>
        </div>

        <div id="graph1_wrapper" >
            <p id="num_msgs">Mesages per time of day</p>
            <svg id="graph1" width="1300"  height="450">
                <g id="graph1_bars">
                </g>
                <g id="graph1_labels">
                </g>
            </svg>

            <button type="button" onclick="day_select(-1)">All</button>
            <button type="button" onclick="day_select(1)">Mon</button>
            <button type="button" onclick="day_select(2)">Tues</button>
            <button type="button" onclick="day_select(3)">Wed</button>
            <button type="button" onclick="day_select(4)">Thur</button>
            <button type="button" onclick="day_select(5)">Fri</button>
            <button type="button" onclick="day_select(6)">Sat</button>
            <button type="button" onclick="day_select(0)">Sun</button>
        </div>

        <div id="graph2_wrapper" >
            <p> Messages over the year</p>
            <svg id="graph2" width="760"  height="20" >
                <g id="graph2_bars" transform="translate(70, 0)" >
                </g>
                <g id="graph2_labels" transform="translate(70, 0)">
                </g>
            </svg>
        </div>

        <div id="graph3_wrapper" >
            <p> Top used words</p>
            <svg id="graph3" width="760" height="700">
                <g id="graph3_bars" transform="translate(70, 30)" >
                </g>
                <g id="graph3_labels" transform="translate(70, 30)" >
                </g>
                <g id="graph3_annotations"  transform="translate(70, 30)" >
                </g>
            </svg>
        </div>

        <section id="graph4_wrapper" >
            <p> Top used Emoji's</p>
        </section>

    </body>

    <script>
     document.getElementById('k_ids_input').oninput = function() {
         k_ids = string_to_int_array(document.getElementById('k_ids_input').value);
     };

     document.getElementById('b_ids_input').oninput = function() {
         b_ids = string_to_int_array(document.getElementById('b_ids_input').value);
     };

     document.getElementById('b_name_input').oninput = function() {
         b_name = document.getElementById('b_name_input').value;
     };

     document.getElementById('k_name_input').oninput = function() {
         k_name = document.getElementById('k_name_input').value;
     };

     document.getElementById('files').addEventListener('change', handleFileSelect, false);
     var file_to_read;
     var time_of_days = [];
    </script>
</html>
